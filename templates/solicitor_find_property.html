{% extends "base.html" %}
{% block landregistry_grid %}
  <div class="breadcrumb">
    <nav role="navigation">
      <ol>
        <li><a href="/">Home</a></li>
        <li>Add client</li>
       </ol>
    </nav>
  </div>
  <div class="solicitor-find-property">
    <div class="full-width">
      <h1 class="heading-36">
        Find the property your client is buying or selling
      </h1>

      <fieldset>
        <div class="form-group">
          <label class="form-label" for="q">Search the land registry</label>
          <p class="form-hint">E.g. postcode, city or town, street name</p>
          <input type="text" class="form-control" id="q" name="q" />
        </div>
      </fieldset>

      <div class="form-group">
        <button type="submit" class="button search-submit">Search</button>
      </div>

      <div class="results">
        <div class="grid grid-1-2">
          <div class="result 30thestow">
            <address>
              <p>30 The Stow</p>
              <p>Harlow</p>
              <p>CM20 3AN</p>
            </address>
            <p>Title number: EX728291</p>
            <p><a href="/solicitors/confirm-client">Select this property</a></p>
          </div>
          <div class="result 29thestow">
            <address>
              <p>29 The Stow</p>
              <p>Harlow</p>
              <p>CM20 3AN</p>
            </address>
            <p>Title number: EX728292</p>
            <p><a href="/solicitors/confirm-client">Select this property</a></p>
          </div>
          <div class="result 26thestow">
            <address>
              <p>26 The Stow</p>
              <p>Harlow</p>
              <p>CM20 3AN</p>
            </address>
            <p>Title number: EX728299</p>
            <p><a href="/solicitors/confirm-client">Select this property</a></p>
          </div>

        </div>
        <div class="grid grid-1-2">
          <div class="map-container"></div>
        </div>
      </div>

    </div>
  </div>
{% endblock %}
{% block extra_js %}
  <script>
    $(function() {
      var map = null;
      var extents = {
        '30thestow': {"geometry": {"type": "MultiPolygon", "crs": {"properties": {"name": "EPSG:3857"}, "type": "name"}, "coordinates": [[[[12745.39455590546, 6759784.078038488], [12744.766724229774, 6759787.477667987], [12744.502460517255, 6759788.941446489], [12744.224411146593, 6759790.486520247], [12750.97112453694, 6759791.649368143], [12751.791318485903, 6759787.033966656], [12756.147703475383, 6759762.522601585], [12747.679288618045, 6759760.972997484], [12743.707150732746, 6759782.088571348], [12745.685922780738, 6759782.435505758], [12745.39455590546, 6759784.078038488]]]]}},
        '29thestow': {"geometry": {"coordinates": [[[[12738.399554449265, 6759759.26900816], [12733.20819276759, 6759788.444717378], [12740.331357937324, 6759789.790774374], [12740.609408028131, 6759788.245700866], [12740.87367242314, 6759786.781922601], [12741.165507908374, 6759785.155554705], [12741.501038074673, 6759783.366128448], [12741.792873323791, 6759781.7397612035], [12743.707150732746, 6759782.088571348], [12747.679288618045, 6759760.972997484], [12738.399554449265, 6759759.26900816]]]], "type": "MultiPolygon", "crs": {"properties": {"name": "EPSG:3857"}, "type": "name"}}},
        '26thestow': {"geometry": {"crs": {"type": "name", "properties": {"name": "EPSG:3857"}}, "type": "MultiPolygon", "coordinates": [[[[12715.636420080258, 6759785.153577343], [12719.102122105665, 6759785.803515486], [12719.734944721547, 6759782.631865009], [12718.149520609404, 6759782.326878414], [12719.197740892372, 6759776.779428467], [12717.218036119606, 6759776.400157347], [12720.895142760743, 6759756.073005967], [12711.712628213394, 6759754.382339404], [12708.968760391492, 6759769.427477924], [12706.420223719875, 6759783.415341181], [12715.636420080258, 6759785.153577343]]]]}},
        '24and25thestow': {"geometry": {"coordinates": [[[[12675.014037529425, 6759763.214985168], [12677.529555594076, 6759763.708121017], [12677.603161358473, 6759763.463299745], [12679.144251991778, 6759763.742078306], [12683.025954729725, 6759764.436563282], [12682.966019833033, 6759764.763499022], [12700.6482639387, 6759767.970595717], [12703.359899623229, 6759752.926399897], [12700.28005868907, 6759752.449678236], [12700.877997077983, 6759749.131829721], [12678.233470061636, 6759745.082084833], [12675.014037529425, 6759763.214985168]]]], "type": "MultiPolygon", "crs": {"properties": {"name": "EPSG:3857"}, "type": "name"}}},
      };

      $('.search-submit').click(function() {
        $('.results').show();
        map = new LR.SingleExtentMap({
          el: '.map-container',
          extent: extents['30thestow'],
        });

        _.each(extents, function(extent, key) {
          $('.'+key).hover(function() {
            map.setExtent(extent);
          })
        });
      });
    });
  </script>
{% endblock %}
